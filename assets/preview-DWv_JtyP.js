var A="pseudo",D=["::-webkit-scrollbar-thumb","::-webkit-slider-thumb"],d={hover:"hover",active:"active",focusVisible:"focus-visible",focusWithin:"focus-within",focus:"focus",visited:"visited",link:"link",target:"target"};const{DOCS_RENDERED:T,FORCE_REMOUNT:C,FORCE_RE_RENDER:N,GLOBALS_UPDATED:x,STORY_CHANGED:P,STORY_RENDERED:j,UPDATE_GLOBALS:k}=__STORYBOOK_MODULE_CORE_EVENTS__,{addons:L,useEffect:R,useMemo:B}=__STORYBOOK_MODULE_PREVIEW_API__;var U=e=>e.indexOf("@")===0,W=e=>{if(U(e))return[e];let r=[],t=0,s=0,o="";for(let n=0,a=e.length;n<a;n++){const l=e[n];if(l==="(")t+=1;else if(l===")")t-=1;else if(l==="[")s+=1;else if(l==="]")s-=1;else if(l===","&&!t&&!s){r.push(o.trim()),o="";continue}o+=l}return r.push(o.trim()),r},v=Object.values(d),E=new RegExp(`:(${v.join("|")})`),q=new RegExp(`:(${v.join("|")})`,"g"),y=new Set,_=e=>{y.has(e)||(console.warn(e),y.add(e))},O=(e,r)=>D.some(t=>e.endsWith(`${t}:${r}`)),M=({cssText:e,selectorText:r},t)=>e.replace(r,W(r).flatMap(s=>{if(s.includes(".pseudo-"))return[];if(!E.test(s))return[s];const o=[];let n=s.replace(q,(i,u)=>(o.push(u),""));const a=o.reduce((i,u)=>O(s,u)?"":i.replace(new RegExp(`:${u}`,"g"),`.pseudo-${u}`),s);let l="";const c=o.map(i=>`.pseudo-${i}-all`).join("");if(s.startsWith(":host(")){const i=s.match(/^:host\(([^ ]+)\) /);i&&!E.test(i[1])?l=`:host(${i[1]}${c}) ${n.replace(i[0],"")}`:l=o.reduce((u,S)=>O(s,S)?"":u.replace(new RegExp(`:${S}`,"g"),`.pseudo-${S}-all`),s)}else s.startsWith("::slotted(")||t?(n.startsWith("::slotted()")&&(n=n.replace("::slotted()","::slotted(*)")),l=`:host(${c}) ${n}`):l=`${c} ${n}`;return[s,a,l].filter(i=>i&&!i.includes(":not()")&&!i.includes(":has()"))}).join(", ")),I=(e,r)=>{try{const s=w(e,1e3,r);return s>=1e3&&_("Reached maximum of 1000 pseudo selectors per sheet, skipping the rest."),s>0}catch(t){return String(t).includes("cssRules")?_(`Can't access cssRules, likely due to CORS restrictions: ${e.href}`):console.error(t,e.href),!1}},w=(e,r,t)=>{let s=0,o=-1;for(const n of e.cssRules){o++;let a=0;if(n.__processed)a=n.__pseudoStatesRewrittenCount;else{if("cssRules"in n&&n.cssRules.length)a=w(n,r-s,t);else{if(!("selectorText"in n))continue;const l=n;if(E.test(l.selectorText)){const c=M(l,t);e.deleteRule(o),e.insertRule(c,o),a=1}}n.__processed=!0,n.__pseudoStatesRewrittenCount=a}if(s+=a,s>=r)break}return s},f=L.getChannel(),p=new Set,$=(e,r)=>{Object.values(d).forEach(t=>{e.classList.remove(`pseudo-${t}`),e.classList.remove(`pseudo-${t}-all`)}),r.forEach(t=>e.classList.add(t))};function m(e,r){const t=[];return e.querySelectorAll("*").forEach(s=>{s.shadowRoot&&t.push(...m(s.shadowRoot,r))}),t.push(...e.querySelectorAll(r).values()),t}var Y=(e,r={})=>{const t=new Map([[e,new Set]]),s=(o,n)=>t.set(o,new Set([...t.get(o)||[],n]));Object.entries(r||{}).forEach(([o,n])=>{typeof n=="boolean"?n&&s(e,`${o}-all`):typeof n=="string"?m(e,n).forEach(a=>s(a,o)):Array.isArray(n)&&n.forEach(a=>m(e,a).forEach(l=>s(l,o)))}),t.forEach((o,n)=>{const a=new Set;o.forEach(l=>{const c=l.replace("-all","");d[l]?a.add(`pseudo-${d[l]}`):d[c]&&a.add(`pseudo-${d[c]}-all`)}),$(n,a)})},b=e=>{const r=new Set;e.className.split(" ").filter(t=>t.startsWith("pseudo-")).forEach(t=>r.add(t));for(let t=e.parentNode;t;){if(t instanceof ShadowRoot){t=t.host;continue}if(t instanceof Element){const s=t;s.className&&s.className.split(" ").filter(o=>o.match(/^pseudo-.+-all$/)!==null).forEach(o=>r.add(o))}t=t.parentNode}$(e,r)},g=e=>{const{rootSelector:r,...t}=e||{};return t},F=(e={},r={})=>e!==null&&r!==null&&Object.keys(e).length===Object.keys(r).length&&Object.keys(e).every(t=>JSON.stringify(e[t])===JSON.stringify(r[t])),G=(e,{viewMode:r,parameters:t,id:s,globals:o})=>{const{pseudo:n}=t,{pseudo:a}=o,{rootSelector:l}=n||{},c=B(()=>l?document.querySelector(l):r==="docs"?document.getElementById(`story--${s}`):document.getElementById("storybook-root")||document.getElementById("root"),[l,r,s]);return R(()=>{const i=g(n);r==="story"&&!F(i,a)&&f.emit(k,{globals:{pseudo:i}})},[n,r]),R(()=>{if(!c)return;const i=setTimeout(()=>{Y(c,a||g(n)),p.forEach(b)},0);return()=>clearTimeout(i)},[c,a,n]),e()},h=e=>{var s;let r=Array.from(e?e.styleSheets:document.styleSheets);(s=e==null?void 0:e.adoptedStyleSheets)!=null&&s.length&&(r=e.adoptedStyleSheets),r.map(o=>I(o,e)).some(Boolean)&&e&&p&&p.add(e.host)};f.on(P,()=>p.clear());f.on(j,()=>h());f.on(x,()=>h());f.on(N,()=>h());f.on(C,()=>h());f.on(T,()=>h());Element.prototype.attachShadow&&(Element.prototype._attachShadow=Element.prototype.attachShadow,Element.prototype.attachShadow=function(r){const t=this._attachShadow({...r,mode:"open"});return requestAnimationFrame(()=>{h(t),p.has(t.host)&&b(t.host)}),t});var K=[G],V={[A]:!1};export{K as decorators,V as globals};
